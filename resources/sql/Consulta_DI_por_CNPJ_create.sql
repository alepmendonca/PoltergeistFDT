CREATE TABLE IF NOT EXISTS IMPORTACAO (
	DI			INTEGER NOT NULL PRIMARY KEY,
	UF_DESPACHO		CHAR(2) NOT NULL,
	UF_CONSIGNATARIO	CHAR(2),
	CNPJ_IMPORTADOR		CHAR(14) NOT NULL,
	UF_IMPORTADOR		CHAR(2),
	CNPJ_ADQUIRENTE		CHAR(14),
	DESEMBARACO		DATE NOT NULL,
	TIPO_DI			VARCHAR(100),
	TIPO_CONHECIMENTO	VARCHAR(100),
	TIPO_RECOLHIMENTO	VARCHAR(100),
	CIF			NUMERIC(10,2) NOT NULL,
	BC_ICMS			NUMERIC(10,2) NOT NULL,
	ICMS_RECOLHIDO		NUMERIC(10,2) NOT NULL,
	ICMS_ESTIMADO		NUMERIC(10,2) NOT NULL
);
CREATE TABLE IF NOT EXISTS IMPORTACAO_ADICAO (
	DI				INTEGER NOT NULL REFERENCES IMPORTACAO(DI),
	ADICAO				INTEGER NOT NULL,
	JUSTIFICATIVA_TRIBUTACAO	VARCHAR(100),
	FUNDAMENTACAO			VARCHAR(100),
	REGIME_TRIB_II			VARCHAR(100),
	NCM				INTEGER NOT NULL REFERENCES NCM(CODIGO),
	BC_II				NUMERIC(10,2) NOT NULL,
	II				NUMERIC(10,2) NOT NULL,
	IPI				NUMERIC(10,2) NOT NULL,
	PIS				NUMERIC(10,2) NOT NULL,
	COFINS				NUMERIC(10,2) NOT NULL,
	OUTRAS_DESPESAS			NUMERIC(10,2) NOT NULL,
	BC_ICMS_ESTIMADA		NUMERIC(10,2) NOT NULL,
	ICMS_ALIQUOTA			NUMERIC(10,2) NOT NULL,
	ICMS_ESTIMADO			NUMERIC(10,2) NOT NULL,
	PRIMARY KEY (DI, ADICAO)
);

CREATE TEMP TABLE DI_TEMP (
	DI			VARCHAR,
	UF_Despacho		VARCHAR,
	UF_Consignatario	VARCHAR,
	UF_Importador		VARCHAR,
	CNPJ_Importador		VARCHAR,
	CNPJ_Adquirente		VARCHAR,
	Desembaraco		VARCHAR,
	Qtd_Adicoes		VARCHAR,
	BC_ICMS			VARCHAR,
	ICMS_Recolhido		VARCHAR,
	CIF			VARCHAR,
	ICMS_Estimado		VARCHAR,
	Tipo_Guia_Recolhimento	VARCHAR,
	Desc_Declaracao		VARCHAR,
	Dif_ICMS_Estimado_Rec	VARCHAR,
	CNPJ_Base_Import	VARCHAR,
	Tipo_Conhecimento	VARCHAR,
	CNPJ_Base_Adquirente	VARCHAR
);
CREATE TEMP TABLE DI_ADICAO_TEMP (
	DI			VARCHAR,
	Adicao			VARCHAR,
	CNPJ_Importador		VARCHAR,
	CNPJ_Adquirente		VARCHAR,
	Desembaraco		VARCHAR,
	Justificativa_Tribut	VARCHAR,
	II			VARCHAR,
	IPI			VARCHAR,
	PIS			VARCHAR,
	COFINS			VARCHAR,
	Outras_Despesas		VARCHAR,
	ICMS_Aliquota		VARCHAR,
	BC_II			VARCHAR,
	BC_ICMS_Estimado	VARCHAR,
	NCM			VARCHAR,
	ICMS_Estimado		VARCHAR,
	Fundamentacao		VARCHAR,
	Tipo_Guia		VARCHAR,
	Tipo_Tributacao		VARCHAR,
	Regime_Trib_II		VARCHAR
);